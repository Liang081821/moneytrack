import{r as g,e as j}from"./react-DrNrPb_Q.js";import{e as le}from"./@gilbarbara-CQoQLGZn.js";import{s as T}from"./is-lite-Ce_qFKpb.js";import{t as V}from"./tree-changes-fs5NfJf2.js";import{s as ae}from"./scroll-DRq-57qf.js";import{s as Q}from"./scrollparent-E9squWda.js";import{r as G}from"./react-dom-DnkMH0ii.js";import{d as N}from"./deepmerge-DkpI02Ha.js";import{R as ce}from"./react-floater-tpFYg1HQ.js";import{i as pe}from"./react-innertext-DjuLpetl.js";var de=Object.defineProperty,ue=(e,o,t)=>o in e?de(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,c=(e,o,t)=>ue(e,typeof o!="symbol"?o+"":o,t),y={INIT:"init",START:"start",STOP:"stop",RESET:"reset",PREV:"prev",NEXT:"next",GO:"go",CLOSE:"close",SKIP:"skip",UPDATE:"update"},x={TOUR_START:"tour:start",STEP_BEFORE:"step:before",BEACON:"beacon",TOOLTIP:"tooltip",STEP_AFTER:"step:after",TOUR_END:"tour:end",TOUR_STATUS:"tour:status",TARGET_NOT_FOUND:"error:target_not_found",ERROR:"error"},h={INIT:"init",READY:"ready",BEACON:"beacon",TOOLTIP:"tooltip",COMPLETE:"complete",ERROR:"error"},f={IDLE:"idle",READY:"ready",WAITING:"waiting",RUNNING:"running",PAUSED:"paused",SKIPPED:"skipped",FINISHED:"finished",ERROR:"error"};function O(){var e;return!!(typeof window<"u"&&((e=window.document)!=null&&e.createElement))}function ee(e){return e?e.getBoundingClientRect():null}function he(e=!1){const{body:o,documentElement:t}=document;if(!o||!t)return 0;if(e){const s=[o.scrollHeight,o.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight].sort((n,r)=>n-r),i=Math.floor(s.length/2);return s.length%2===0?(s[i-1]+s[i])/2:s[i]}return Math.max(o.scrollHeight,o.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}function w(e){if(typeof e=="string")try{return document.querySelector(e)}catch{return null}return e}function fe(e){return!e||e.nodeType!==1?null:getComputedStyle(e)}function K(e,o,t){if(!e)return _();const s=Q(e);if(s){if(s.isSameNode(_()))return t?document:_();if(!(s.scrollHeight>s.offsetHeight)&&!o)return s.style.overflow="initial",_()}return s}function W(e,o){if(!e)return!1;const t=K(e,o);return t?!t.isSameNode(_()):!1}function ge(e){return e.offsetParent!==document.body}function U(e,o="fixed"){if(!e||!(e instanceof HTMLElement))return!1;const{nodeName:t}=e,s=fe(e);return t==="BODY"||t==="HTML"?!1:s&&s.position===o?!0:e.parentNode?U(e.parentNode,o):!1}function me(e){var o;if(!e)return!1;let t=e;for(;t&&t!==document.body;){if(t instanceof HTMLElement){const{display:s,visibility:i}=getComputedStyle(t);if(s==="none"||i==="hidden")return!1}t=(o=t.parentElement)!=null?o:null}return!0}function ye(e,o,t){var s;const i=ee(e),n=K(e,t),r=W(e,t);let l=0,d=(s=i==null?void 0:i.top)!=null?s:0;return n instanceof HTMLElement&&(l=n.scrollTop,!r&&!U(e)&&(d+=l),n.isSameNode(_())||(d+=_().scrollTop)),Math.floor(d-o)}function be(e,o,t){var s;if(!e)return 0;const{offsetTop:i=0,scrollTop:n=0}=(s=Q(e))!=null?s:{};let r=e.getBoundingClientRect().top+n;i&&(W(e,t)||ge(e))&&(r-=i);const l=Math.floor(r-o);return l<0?0:l}function _(){var e;return(e=document.scrollingElement)!=null?e:document.documentElement}function Se(e,o){const{duration:t,element:s}=o;return new Promise((i,n)=>{const{scrollTop:r}=s,l=e>r?e-r:r-e;ae.top(s,e,{duration:l<100?50:t},d=>d&&d.message!=="Element already at target scroll position"?n(d):i())})}var F=G.createPortal!==void 0;function te(e=navigator.userAgent){let o=e;return typeof window>"u"?o="node":document.documentMode?o="ie":/Edge/.test(e)?o="edge":window.opera||e.includes(" OPR/")?o="opera":typeof window.InstallTrigger<"u"?o="firefox":window.chrome?o="chrome":/(Version\/([\d._]+).*Safari|CriOS|FxiOS| Mobile\/)/.test(e)&&(o="safari"),o}function C(e){const o=[],t=s=>{if(typeof s=="string"||typeof s=="number")o.push(s);else if(Array.isArray(s))s.forEach(i=>t(i));else if(g.isValidElement(s)){const{children:i}=s.props;Array.isArray(i)?i.forEach(n=>t(n)):t(i)}};return t(e),o.join(" ").trim()}function Ee(e,o){return!T.plainObject(e)||!T.array(o)?!1:Object.keys(e).every(t=>o.includes(t))}function Te(e){const o=/^#?([\da-f])([\da-f])([\da-f])$/i,t=e.replace(o,(i,n,r,l)=>n+n+r+r+l+l),s=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(t);return s?[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]:[]}function $(e){return e.disableBeacon||e.placement==="center"}function J(){return!["chrome","safari","firefox","opera"].includes(te())}function A({data:e,debug:o=!1,title:t,warn:s=!1}){const i=s?console.warn||console.error:console.log;o&&(t&&e?(console.groupCollapsed(`%creact-joyride: ${t}`,"color: #ff0044; font-weight: bold; font-size: 12px;"),Array.isArray(e)?e.forEach(n=>{T.plainObject(n)&&n.key?i.apply(console,[n.key,n.value]):i.apply(console,[n])}):i.apply(console,[e]),console.groupEnd()):console.error("Missing title or data props"))}function ve(e){return Object.keys(e)}function oe(e,...o){if(!T.plainObject(e))throw new TypeError("Expected an object");const t={};for(const s in e)({}).hasOwnProperty.call(e,s)&&(o.includes(s)||(t[s]=e[s]));return t}function Pe(e,...o){if(!T.plainObject(e))throw new TypeError("Expected an object");if(!o.length)return e;const t={};for(const s in e)({}).hasOwnProperty.call(e,s)&&o.includes(s)&&(t[s]=e[s]);return t}function xe(e){const{isFirstStep:o,lifecycle:t,previousLifecycle:s,scrollToFirstStep:i,step:n,target:r}=e;return!n.disableScrolling&&(!o||i||t===h.TOOLTIP)&&n.placement!=="center"&&(!n.isFixed||!U(r))&&s!==t&&[h.BEACON,h.TOOLTIP].includes(t)}var Ce={options:{preventOverflow:{boundariesElement:"scrollParent"}},wrapperOptions:{offset:-18,position:!0}},se={back:"Back",close:"Close",last:"Last",next:"Next",nextLabelWithProgress:"Next (Step {step} of {steps})",open:"Open the dialog",skip:"Skip"},Oe={event:"click",placement:"bottom",offset:10,disableBeacon:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrollParentFix:!1,disableScrolling:!1,hideBackButton:!1,hideCloseButton:!1,hideFooter:!1,isFixed:!1,locale:se,showProgress:!1,showSkipButton:!1,spotlightClicks:!1,spotlightPadding:10},Ne={continuous:!1,debug:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrolling:!1,disableScrollParentFix:!1,getHelpers:void 0,hideBackButton:!1,run:!0,scrollOffset:20,scrollDuration:300,scrollToFirstStep:!1,showSkipButton:!1,showProgress:!1,spotlightClicks:!1,spotlightPadding:10,steps:[]},we={arrowColor:"#fff",backgroundColor:"#fff",beaconSize:36,overlayColor:"rgba(0, 0, 0, 0.5)",primaryColor:"#f04",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",textColor:"#333",width:380,zIndex:100},M={backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",cursor:"pointer",fontSize:16,lineHeight:1,padding:8,WebkitAppearance:"none"},X={borderRadius:4,position:"absolute"};function Ie(e,o){var t,s,i,n,r;const{floaterProps:l,styles:d}=e,p=N((t=o.floaterProps)!=null?t:{},l??{}),u=N(d??{},(s=o.styles)!=null?s:{}),a=N(we,u.options||{}),m=o.placement==="center"||o.disableBeacon;let{width:S}=a;window.innerWidth>480&&(S=380),"width"in a&&(S=typeof a.width=="number"&&window.innerWidth<a.width?window.innerWidth-30:a.width);const b={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,zIndex:a.zIndex},E={beacon:{...M,display:m?"none":"inline-block",height:a.beaconSize,position:"relative",width:a.beaconSize,zIndex:a.zIndex},beaconInner:{animation:"joyride-beacon-inner 1.2s infinite ease-in-out",backgroundColor:a.primaryColor,borderRadius:"50%",display:"block",height:"50%",left:"50%",opacity:.7,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"},beaconOuter:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",backgroundColor:`rgba(${Te(a.primaryColor).join(",")}, 0.2)`,border:`2px solid ${a.primaryColor}`,borderRadius:"50%",boxSizing:"border-box",display:"block",height:"100%",left:0,opacity:.9,position:"absolute",top:0,transformOrigin:"center",width:"100%"},tooltip:{backgroundColor:a.backgroundColor,borderRadius:5,boxSizing:"border-box",color:a.textColor,fontSize:16,maxWidth:"100%",padding:15,position:"relative",width:S},tooltipContainer:{lineHeight:1.4,textAlign:"center"},tooltipTitle:{fontSize:18,margin:0},tooltipContent:{padding:"20px 10px"},tooltipFooter:{alignItems:"center",display:"flex",justifyContent:"flex-end",marginTop:15},tooltipFooterSpacer:{flex:1},buttonNext:{...M,backgroundColor:a.primaryColor,borderRadius:4,color:"#fff"},buttonBack:{...M,color:a.primaryColor,marginLeft:"auto",marginRight:5},buttonClose:{...M,color:a.textColor,height:14,padding:15,position:"absolute",right:0,top:0,width:14},buttonSkip:{...M,color:a.textColor,fontSize:14},overlay:{...b,backgroundColor:a.overlayColor,mixBlendMode:"hard-light"},overlayLegacy:{...b},overlayLegacyCenter:{...b,backgroundColor:a.overlayColor},spotlight:{...X,backgroundColor:"gray"},spotlightLegacy:{...X,boxShadow:`0 0 0 9999px ${a.overlayColor}, ${a.spotlightShadow}`},floaterStyles:{arrow:{color:(r=(n=(i=p==null?void 0:p.styles)==null?void 0:i.arrow)==null?void 0:n.color)!=null?r:a.arrowColor},options:{zIndex:a.zIndex+100}},options:a};return N(E,u)}function ke(e){return Pe(e,"beaconComponent","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrolling","disableScrollParentFix","floaterProps","hideBackButton","hideCloseButton","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","styles","tooltipComponent")}function B(e,o){var t,s,i,n,r,l;const d=o??{},p=N.all([Oe,ke(e),d],{isMergeableObject:T.plainObject}),u=Ie(e,p),a=W(w(p.target),p.disableScrollParentFix),m=N.all([Ce,(t=e.floaterProps)!=null?t:{},(s=p.floaterProps)!=null?s:{}]);return m.offset=p.offset,m.styles=N((i=m.styles)!=null?i:{},u.floaterStyles),m.offset+=(r=(n=e.spotlightPadding)!=null?n:p.spotlightPadding)!=null?r:0,p.placementBeacon&&m.wrapperOptions&&(m.wrapperOptions.placement=p.placementBeacon),a&&m.options.preventOverflow&&(m.options.preventOverflow.boundariesElement="window"),{...p,locale:N.all([se,(l=e.locale)!=null?l:{},p.locale||{}]),floaterProps:m,styles:oe(u,"floaterStyles")}}function ie(e,o=!1){return T.plainObject(e)?e.target?!0:(A({title:"validateStep",data:"target is missing from the step",warn:!0,debug:o}),!1):(A({title:"validateStep",data:"step must be an object",warn:!0,debug:o}),!1)}function q(e,o=!1){return T.array(e)?e.every(t=>ie(t,o)):(A({title:"validateSteps",data:"steps must be an array",warn:!0,debug:o}),!1)}var ne={action:"init",controlled:!1,index:0,lifecycle:h.INIT,origin:null,size:0,status:f.IDLE},Z=ve(oe(ne,"controlled","size")),Re=class{constructor(e){c(this,"beaconPopper"),c(this,"tooltipPopper"),c(this,"data",new Map),c(this,"listener"),c(this,"store",new Map),c(this,"addListener",i=>{this.listener=i}),c(this,"setSteps",i=>{const{size:n,status:r}=this.getState(),l={size:i.length,status:r};this.data.set("steps",i),r===f.WAITING&&!n&&i.length&&(l.status=f.RUNNING),this.setState(l)}),c(this,"getPopper",i=>i==="beacon"?this.beaconPopper:this.tooltipPopper),c(this,"setPopper",(i,n)=>{i==="beacon"?this.beaconPopper=n:this.tooltipPopper=n}),c(this,"cleanupPoppers",()=>{this.beaconPopper=null,this.tooltipPopper=null}),c(this,"close",(i=null)=>{const{index:n,status:r}=this.getState();r===f.RUNNING&&this.setState({...this.getNextState({action:y.CLOSE,index:n+1,origin:i})})}),c(this,"go",i=>{const{controlled:n,status:r}=this.getState();if(n||r!==f.RUNNING)return;const l=this.getSteps()[i];this.setState({...this.getNextState({action:y.GO,index:i}),status:l?r:f.FINISHED})}),c(this,"info",()=>this.getState()),c(this,"next",()=>{const{index:i,status:n}=this.getState();n===f.RUNNING&&this.setState(this.getNextState({action:y.NEXT,index:i+1}))}),c(this,"open",()=>{const{status:i}=this.getState();i===f.RUNNING&&this.setState({...this.getNextState({action:y.UPDATE,lifecycle:h.TOOLTIP})})}),c(this,"prev",()=>{const{index:i,status:n}=this.getState();n===f.RUNNING&&this.setState({...this.getNextState({action:y.PREV,index:i-1})})}),c(this,"reset",(i=!1)=>{const{controlled:n}=this.getState();n||this.setState({...this.getNextState({action:y.RESET,index:0}),status:i?f.RUNNING:f.READY})}),c(this,"skip",()=>{const{status:i}=this.getState();i===f.RUNNING&&this.setState({action:y.SKIP,lifecycle:h.INIT,status:f.SKIPPED})}),c(this,"start",i=>{const{index:n,size:r}=this.getState();this.setState({...this.getNextState({action:y.START,index:T.number(i)?i:n},!0),status:r?f.RUNNING:f.WAITING})}),c(this,"stop",(i=!1)=>{const{index:n,status:r}=this.getState();[f.FINISHED,f.SKIPPED].includes(r)||this.setState({...this.getNextState({action:y.STOP,index:n+(i?1:0)}),status:f.PAUSED})}),c(this,"update",i=>{var n,r;if(!Ee(i,Z))throw new Error(`State is not valid. Valid keys: ${Z.join(", ")}`);this.setState({...this.getNextState({...this.getState(),...i,action:(n=i.action)!=null?n:y.UPDATE,origin:(r=i.origin)!=null?r:null},!0)})});const{continuous:o=!1,stepIndex:t,steps:s=[]}=e??{};this.setState({action:y.INIT,controlled:T.number(t),continuous:o,index:T.number(t)?t:0,lifecycle:h.INIT,origin:null,status:s.length?f.READY:f.IDLE},!0),this.beaconPopper=null,this.tooltipPopper=null,this.listener=null,this.setSteps(s)}getState(){return this.store.size?{action:this.store.get("action")||"",controlled:this.store.get("controlled")||!1,index:parseInt(this.store.get("index"),10),lifecycle:this.store.get("lifecycle")||"",origin:this.store.get("origin")||null,size:this.store.get("size")||0,status:this.store.get("status")||""}:{...ne}}getNextState(e,o=!1){var t,s,i,n,r;const{action:l,controlled:d,index:p,size:u,status:a}=this.getState(),m=T.number(e.index)?e.index:p,S=d&&!o?p:Math.min(Math.max(m,0),u);return{action:(t=e.action)!=null?t:l,controlled:d,index:S,lifecycle:(s=e.lifecycle)!=null?s:h.INIT,origin:(i=e.origin)!=null?i:null,size:(n=e.size)!=null?n:u,status:S===u?f.FINISHED:(r=e.status)!=null?r:a}}getSteps(){const e=this.data.get("steps");return Array.isArray(e)?e:[]}hasUpdatedState(e){const o=JSON.stringify(e),t=JSON.stringify(this.getState());return o!==t}setState(e,o=!1){const t=this.getState(),{action:s,index:i,lifecycle:n,origin:r=null,size:l,status:d}={...t,...e};this.store.set("action",s),this.store.set("index",i),this.store.set("lifecycle",n),this.store.set("origin",r),this.store.set("size",l),this.store.set("status",d),o&&(this.store.set("controlled",e.controlled),this.store.set("continuous",e.continuous)),this.listener&&this.hasUpdatedState(t)&&this.listener(this.getState())}getHelpers(){return{close:this.close,go:this.go,info:this.info,next:this.next,open:this.open,prev:this.prev,reset:this.reset,skip:this.skip}}};function Le(e){return new Re(e)}function _e({styles:e}){return g.createElement("div",{key:"JoyrideSpotlight",className:"react-joyride__spotlight","data-test-id":"spotlight",style:e})}var Ae=_e,Be=class extends g.Component{constructor(){super(...arguments),c(this,"isActive",!1),c(this,"resizeTimeout"),c(this,"scrollTimeout"),c(this,"scrollParent"),c(this,"state",{isScrolling:!1,mouseOverSpotlight:!1,showSpotlight:!0}),c(this,"hideSpotlight",()=>{const{continuous:e,disableOverlay:o,lifecycle:t}=this.props,s=[h.INIT,h.BEACON,h.COMPLETE,h.ERROR];return o||(e?s.includes(t):t!==h.TOOLTIP)}),c(this,"handleMouseMove",e=>{const{mouseOverSpotlight:o}=this.state,{height:t,left:s,position:i,top:n,width:r}=this.spotlightStyles,l=i==="fixed"?e.clientY:e.pageY,d=i==="fixed"?e.clientX:e.pageX,p=l>=n&&l<=n+t,a=d>=s&&d<=s+r&&p;a!==o&&this.updateState({mouseOverSpotlight:a})}),c(this,"handleScroll",()=>{const{target:e}=this.props,o=w(e);if(this.scrollParent!==document){const{isScrolling:t}=this.state;t||this.updateState({isScrolling:!0,showSpotlight:!1}),clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{this.updateState({isScrolling:!1,showSpotlight:!0})},50)}else U(o,"sticky")&&this.updateState({})}),c(this,"handleResize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.isActive&&this.forceUpdate()},100)})}componentDidMount(){const{debug:e,disableScrolling:o,disableScrollParentFix:t=!1,target:s}=this.props,i=w(s);this.scrollParent=K(i??document.body,t,!0),this.isActive=!0,window.addEventListener("resize",this.handleResize)}componentDidUpdate(e){var o;const{lifecycle:t,spotlightClicks:s}=this.props,{changed:i}=V(e,this.props);i("lifecycle",h.TOOLTIP)&&((o=this.scrollParent)==null||o.addEventListener("scroll",this.handleScroll,{passive:!0}),setTimeout(()=>{const{isScrolling:n}=this.state;n||this.updateState({showSpotlight:!0})},100)),(i("spotlightClicks")||i("disableOverlay")||i("lifecycle"))&&(s&&t===h.TOOLTIP?window.addEventListener("mousemove",this.handleMouseMove,!1):t!==h.TOOLTIP&&window.removeEventListener("mousemove",this.handleMouseMove))}componentWillUnmount(){var e;this.isActive=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout),clearTimeout(this.scrollTimeout),(e=this.scrollParent)==null||e.removeEventListener("scroll",this.handleScroll)}get overlayStyles(){const{mouseOverSpotlight:e}=this.state,{disableOverlayClose:o,placement:t,styles:s}=this.props;let i=s.overlay;return J()&&(i=t==="center"?s.overlayLegacyCenter:s.overlayLegacy),{cursor:o?"default":"pointer",height:he(),pointerEvents:e?"none":"auto",...i}}get spotlightStyles(){var e,o,t;const{showSpotlight:s}=this.state,{disableScrollParentFix:i=!1,spotlightClicks:n,spotlightPadding:r=0,styles:l,target:d}=this.props,p=w(d),u=ee(p),a=U(p),m=ye(p,r,i);return{...J()?l.spotlightLegacy:l.spotlight,height:Math.round(((e=u==null?void 0:u.height)!=null?e:0)+r*2),left:Math.round(((o=u==null?void 0:u.left)!=null?o:0)-r),opacity:s?1:0,pointerEvents:n?"none":"auto",position:a?"fixed":"absolute",top:m,transition:"opacity 0.2s",width:Math.round(((t=u==null?void 0:u.width)!=null?t:0)+r*2)}}updateState(e){this.isActive&&this.setState(o=>({...o,...e}))}render(){const{showSpotlight:e}=this.state,{onClickOverlay:o,placement:t}=this.props,{hideSpotlight:s,overlayStyles:i,spotlightStyles:n}=this;if(s())return null;let r=t!=="center"&&e&&g.createElement(Ae,{styles:n});if(te()==="safari"){const{mixBlendMode:l,zIndex:d,...p}=i;r=g.createElement("div",{style:{...p}},r),delete i.backgroundColor}return g.createElement("div",{className:"react-joyride__overlay","data-test-id":"overlay",onClick:o,role:"presentation",style:i},r)}},De=class extends g.Component{constructor(){super(...arguments),c(this,"node",null)}componentDidMount(){const{id:e}=this.props;O()&&(this.node=document.createElement("div"),this.node.id=e,document.body.appendChild(this.node),F||this.renderReact15())}componentDidUpdate(){O()&&(F||this.renderReact15())}componentWillUnmount(){!O()||!this.node||(F||G.unmountComponentAtNode(this.node),this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=null))}renderReact15(){if(!O())return;const{children:e}=this.props;this.node&&G.unstable_renderSubtreeIntoContainer(this,e,this.node)}renderReact16(){if(!O()||!F)return null;const{children:e}=this.props;return this.node?G.createPortal(e,this.node):null}render(){return F?this.renderReact16():null}},Fe=class{constructor(e,o){if(c(this,"element"),c(this,"options"),c(this,"canBeTabbed",t=>{const{tabIndex:s}=t;return s===null||s<0?!1:this.canHaveFocus(t)}),c(this,"canHaveFocus",t=>{const s=/input|select|textarea|button|object/,i=t.nodeName.toLowerCase();return(s.test(i)&&!t.getAttribute("disabled")||i==="a"&&!!t.getAttribute("href"))&&this.isVisible(t)}),c(this,"findValidTabElements",()=>[].slice.call(this.element.querySelectorAll("*"),0).filter(this.canBeTabbed)),c(this,"handleKeyDown",t=>{const{code:s="Tab"}=this.options;t.code===s&&this.interceptTab(t)}),c(this,"interceptTab",t=>{t.preventDefault();const s=this.findValidTabElements(),{shiftKey:i}=t;if(!s.length)return;let n=document.activeElement?s.indexOf(document.activeElement):0;n===-1||!i&&n+1===s.length?n=0:i&&n===0?n=s.length-1:n+=i?-1:1,s[n].focus()}),c(this,"isHidden",t=>{const s=t.offsetWidth<=0&&t.offsetHeight<=0,i=window.getComputedStyle(t);return s&&!t.innerHTML?!0:s&&i.getPropertyValue("overflow")!=="visible"||i.getPropertyValue("display")==="none"}),c(this,"isVisible",t=>{let s=t;for(;s;)if(s instanceof HTMLElement){if(s===document.body)break;if(this.isHidden(s))return!1;s=s.parentNode}return!0}),c(this,"removeScope",()=>{window.removeEventListener("keydown",this.handleKeyDown)}),c(this,"checkFocus",t=>{document.activeElement!==t&&(t.focus(),window.requestAnimationFrame(()=>this.checkFocus(t)))}),c(this,"setFocus",()=>{const{selector:t}=this.options;if(!t)return;const s=this.element.querySelector(t);s&&window.requestAnimationFrame(()=>this.checkFocus(s))}),!(e instanceof HTMLElement))throw new TypeError("Invalid parameter: element must be an HTMLElement");this.element=e,this.options=o,window.addEventListener("keydown",this.handleKeyDown,!1),this.setFocus()}},Me=class extends g.Component{constructor(e){if(super(e),c(this,"beacon",null),c(this,"setBeaconRef",i=>{this.beacon=i}),e.beaconComponent)return;const o=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.id="joyride-beacon-animation",e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode(`
        @keyframes joyride-beacon-inner {
          20% {
            opacity: 0.9;
          }
        
          90% {
            opacity: 0.7;
          }
        }
        
        @keyframes joyride-beacon-outer {
          0% {
            transform: scale(1);
          }
        
          45% {
            opacity: 0.7;
            transform: scale(0.75);
          }
        
          100% {
            opacity: 0.9;
            transform: scale(1);
          }
        }
      `)),o.appendChild(t)}componentDidMount(){const{shouldFocus:e}=this.props;setTimeout(()=>{T.domElement(this.beacon)&&e&&this.beacon.focus()},0)}componentWillUnmount(){const e=document.getElementById("joyride-beacon-animation");e!=null&&e.parentNode&&e.parentNode.removeChild(e)}render(){const{beaconComponent:e,continuous:o,index:t,isLastStep:s,locale:i,onClickOrHover:n,size:r,step:l,styles:d}=this.props,p=T.string(i.open)?i.open:pe(i.open),u={"aria-label":p,onClick:n,onMouseEnter:n,ref:this.setBeaconRef,title:p};let a;if(e){const m=e;a=g.createElement(m,{continuous:o,index:t,isLastStep:s,size:r,step:l,...u})}else a=g.createElement("button",{key:"JoyrideBeacon",className:"react-joyride__beacon","data-test-id":"button-beacon",style:d.beacon,type:"button",...u},g.createElement("span",{style:d.beaconInner}),g.createElement("span",{style:d.beaconOuter}));return a}};function Ue({styles:e,...o}){const{color:t,height:s,width:i,...n}=e;return j.createElement("button",{style:n,type:"button",...o},j.createElement("svg",{height:typeof s=="number"?`${s}px`:s,preserveAspectRatio:"xMidYMid",version:"1.1",viewBox:"0 0 18 18",width:typeof i=="number"?`${i}px`:i,xmlns:"http://www.w3.org/2000/svg"},j.createElement("g",null,j.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:t}))))}var ze=Ue;function He(e){const{backProps:o,closeProps:t,index:s,isLastStep:i,primaryProps:n,skipProps:r,step:l,tooltipProps:d}=e,{content:p,hideBackButton:u,hideCloseButton:a,hideFooter:m,showSkipButton:S,styles:b,title:E}=l,v={primary:n.title};return v.primary&&(v.primary=g.createElement("button",{"data-test-id":"button-primary",style:b.buttonNext,type:"button",...n},v.primary)),S&&!i&&(v.skip=g.createElement("button",{"aria-live":"off","data-test-id":"button-skip",style:b.buttonSkip,type:"button",...r},r.title)),!u&&s>0&&(v.back=g.createElement("button",{"data-test-id":"button-back",style:b.buttonBack,type:"button",...o},o.title)),v.close=!a&&g.createElement(ze,{"data-test-id":"button-close",styles:b.buttonClose,...t}),g.createElement("div",{key:"JoyrideTooltip","aria-label":C(E)||C(p),className:"react-joyride__tooltip",style:b.tooltip,...d},g.createElement("div",{style:b.tooltipContainer},E&&g.createElement("h1",{"aria-label":C(E),style:b.tooltipTitle},E),g.createElement("div",{style:b.tooltipContent},p)),!m&&g.createElement("div",{style:b.tooltipFooter},g.createElement("div",{style:b.tooltipFooterSpacer},v.skip),v.back,v.primary),v.close)}var je=He,Ge=class extends g.Component{constructor(){super(...arguments),c(this,"handleClickBack",e=>{e.preventDefault();const{helpers:o}=this.props;o.prev()}),c(this,"handleClickClose",e=>{e.preventDefault();const{helpers:o}=this.props;o.close("button_close")}),c(this,"handleClickPrimary",e=>{e.preventDefault();const{continuous:o,helpers:t}=this.props;if(!o){t.close("button_primary");return}t.next()}),c(this,"handleClickSkip",e=>{e.preventDefault();const{helpers:o}=this.props;o.skip()}),c(this,"getElementsProps",()=>{const{continuous:e,index:o,isLastStep:t,setTooltipRef:s,size:i,step:n}=this.props,r=C(n.locale.back),l=C(n.locale.close),d=C(n.locale.last),p=C(n.locale.next),u=C(n.locale.skip);let a=l,m=l;return e&&(a=p,m=p,n.showProgress&&!t&&(a=C(n.locale.nextLabelWithProgress).replace("{step}",String(o+1)).replace("{steps}",String(i)),m=`${p} (${o+1}/${i})`),t&&(a=d,m=d)),{backProps:{"aria-label":r,"data-action":"back",onClick:this.handleClickBack,role:"button",title:r},closeProps:{"aria-label":l,"data-action":"close",onClick:this.handleClickClose,role:"button",title:l},primaryProps:{"aria-label":a,"data-action":"primary",onClick:this.handleClickPrimary,role:"button",title:m},skipProps:{"aria-label":u,"data-action":"skip",onClick:this.handleClickSkip,role:"button",title:u},tooltipProps:{"aria-modal":!0,ref:s,role:"alertdialog"}}})}render(){const{continuous:e,index:o,isLastStep:t,setTooltipRef:s,size:i,step:n}=this.props,{beaconComponent:r,tooltipComponent:l,...d}=n;let p;if(l){const u={...this.getElementsProps(),continuous:e,index:o,isLastStep:t,size:i,step:d,setTooltipRef:s},a=l;p=g.createElement(a,{...u})}else p=g.createElement(je,{...this.getElementsProps(),continuous:e,index:o,isLastStep:t,size:i,step:n});return p}},Ve=class extends g.Component{constructor(){super(...arguments),c(this,"scope",null),c(this,"tooltip",null),c(this,"handleClickHoverBeacon",e=>{const{step:o,store:t}=this.props;e.type==="mouseenter"&&o.event!=="hover"||t.update({lifecycle:h.TOOLTIP})}),c(this,"setTooltipRef",e=>{this.tooltip=e}),c(this,"setPopper",(e,o)=>{var t;const{action:s,lifecycle:i,step:n,store:r}=this.props;o==="wrapper"?r.setPopper("beacon",e):r.setPopper("tooltip",e),r.getPopper("beacon")&&(r.getPopper("tooltip")||n.placement==="center")&&i===h.INIT&&r.update({action:s,lifecycle:h.READY}),(t=n.floaterProps)!=null&&t.getPopper&&n.floaterProps.getPopper(e,o)}),c(this,"renderTooltip",e=>{const{continuous:o,helpers:t,index:s,size:i,step:n}=this.props;return g.createElement(Ge,{continuous:o,helpers:t,index:s,isLastStep:s+1===i,setTooltipRef:this.setTooltipRef,size:i,step:n,...e})})}componentDidMount(){const{debug:e,index:o}=this.props;A({title:`step:${o}`,data:[{key:"props",value:this.props}],debug:e})}componentDidUpdate(e){var o;const{action:t,callback:s,continuous:i,controlled:n,debug:r,helpers:l,index:d,lifecycle:p,status:u,step:a,store:m}=this.props,{changed:S,changedFrom:b}=V(e,this.props),E=l.info(),v=i&&t!==y.CLOSE&&(d>0||t===y.PREV),I=S("action")||S("index")||S("lifecycle")||S("status"),P=b("lifecycle",[h.TOOLTIP,h.INIT],h.INIT),k=S("action",[y.NEXT,y.PREV,y.SKIP,y.CLOSE]),R=n&&d===e.index;if(k&&(P||R)&&s({...E,index:e.index,lifecycle:h.COMPLETE,step:e.step,type:x.STEP_AFTER}),a.placement==="center"&&u===f.RUNNING&&S("index")&&t!==y.START&&p===h.INIT&&m.update({lifecycle:h.READY}),I){const z=w(a.target),H=!!z;H&&me(z)?(b("status",f.READY,f.RUNNING)||b("lifecycle",h.INIT,h.READY))&&s({...E,step:a,type:x.STEP_BEFORE}):(console.warn(H?"Target not visible":"Target not mounted",a),s({...E,type:x.TARGET_NOT_FOUND,step:a}),n||m.update({index:d+(t===y.PREV?-1:1)}))}b("lifecycle",h.INIT,h.READY)&&m.update({lifecycle:$(a)||v?h.TOOLTIP:h.BEACON}),S("index")&&A({title:`step:${p}`,data:[{key:"props",value:this.props}],debug:r}),S("lifecycle",h.BEACON)&&s({...E,step:a,type:x.BEACON}),S("lifecycle",h.TOOLTIP)&&(s({...E,step:a,type:x.TOOLTIP}),this.tooltip&&(this.scope=new Fe(this.tooltip,{selector:"[data-action=primary]"}),this.scope.setFocus())),b("lifecycle",[h.TOOLTIP,h.INIT],h.INIT)&&((o=this.scope)==null||o.removeScope(),m.cleanupPoppers())}componentWillUnmount(){var e;(e=this.scope)==null||e.removeScope()}get open(){const{lifecycle:e,step:o}=this.props;return $(o)||e===h.TOOLTIP}render(){const{continuous:e,debug:o,index:t,nonce:s,shouldScroll:i,size:n,step:r}=this.props,l=w(r.target);return!ie(r)||!T.domElement(l)?null:g.createElement("div",{key:`JoyrideStep-${t}`,className:"react-joyride__step"},g.createElement(ce,{...r.floaterProps,component:this.renderTooltip,debug:o,getPopper:this.setPopper,id:`react-joyride-step-${t}`,open:this.open,placement:r.placement,target:r.target},g.createElement(Me,{beaconComponent:r.beaconComponent,continuous:e,index:t,isLastStep:t+1===n,locale:r.locale,nonce:s,onClickOrHover:this.handleClickHoverBeacon,shouldFocus:i,size:n,step:r,styles:r.styles})))}},re=class extends g.Component{constructor(e){super(e),c(this,"helpers"),c(this,"store"),c(this,"callback",r=>{const{callback:l}=this.props;T.function(l)&&l(r)}),c(this,"handleKeyboard",r=>{const{index:l,lifecycle:d}=this.state,{steps:p}=this.props,u=p[l];d===h.TOOLTIP&&r.code==="Escape"&&u&&!u.disableCloseOnEsc&&this.store.close("keyboard")}),c(this,"handleClickOverlay",()=>{const{index:r}=this.state,{steps:l}=this.props;B(this.props,l[r]).disableOverlayClose||this.helpers.close("overlay")}),c(this,"syncState",r=>{this.setState(r)});const{debug:o,getHelpers:t,run:s=!0,stepIndex:i}=e;this.store=Le({...e,controlled:s&&T.number(i)}),this.helpers=this.store.getHelpers();const{addListener:n}=this.store;A({title:"init",data:[{key:"props",value:this.props},{key:"state",value:this.state}],debug:o}),n(this.syncState),t&&t(this.helpers),this.state=this.store.getState()}componentDidMount(){if(!O())return;const{debug:e,disableCloseOnEsc:o,run:t,steps:s}=this.props,{start:i}=this.store;q(s,e)&&t&&i(),o||document.body.addEventListener("keydown",this.handleKeyboard,{passive:!0})}componentDidUpdate(e,o){if(!O())return;const{action:t,controlled:s,index:i,status:n}=this.state,{debug:r,run:l,stepIndex:d,steps:p}=this.props,{stepIndex:u,steps:a}=e,{reset:m,setSteps:S,start:b,stop:E,update:v}=this.store,{changed:I}=V(e,this.props),{changed:P,changedFrom:k}=V(o,this.state),R=B(this.props,p[i]),z=!le(a,p),H=T.number(d)&&I("stepIndex"),Y=w(R.target);if(z&&(q(p,r)?S(p):console.warn("Steps are not valid",p)),I("run")&&(l?b(d):E()),H){let L=T.number(u)&&u<d?y.NEXT:y.PREV;t===y.STOP&&(L=y.START),[f.FINISHED,f.SKIPPED].includes(n)||v({action:t===y.CLOSE?y.CLOSE:L,index:d,lifecycle:h.INIT})}!s&&n===f.RUNNING&&i===0&&!Y&&(this.store.update({index:i+1}),this.callback({...this.state,type:x.TARGET_NOT_FOUND,step:R}));const D={...this.state,index:i,step:R};if(P("action",[y.NEXT,y.PREV,y.SKIP,y.CLOSE])&&P("status",f.PAUSED)){const L=B(this.props,p[o.index]);this.callback({...D,index:o.index,lifecycle:h.COMPLETE,step:L,type:x.STEP_AFTER})}if(P("status",[f.FINISHED,f.SKIPPED])){const L=B(this.props,p[o.index]);s||this.callback({...D,index:o.index,lifecycle:h.COMPLETE,step:L,type:x.STEP_AFTER}),this.callback({...D,type:x.TOUR_END,step:L,index:o.index}),m()}else k("status",[f.IDLE,f.READY],f.RUNNING)?this.callback({...D,type:x.TOUR_START}):(P("status")||P("action",y.RESET))&&this.callback({...D,type:x.TOUR_STATUS});this.scrollToStep(o)}componentWillUnmount(){const{disableCloseOnEsc:e}=this.props;e||document.body.removeEventListener("keydown",this.handleKeyboard)}scrollToStep(e){const{index:o,lifecycle:t,status:s}=this.state,{debug:i,disableScrollParentFix:n=!1,scrollDuration:r,scrollOffset:l=20,scrollToFirstStep:d=!1,steps:p}=this.props,u=B(this.props,p[o]),a=w(u.target),m=xe({isFirstStep:o===0,lifecycle:t,previousLifecycle:e.lifecycle,scrollToFirstStep:d,step:u,target:a});if(s===f.RUNNING&&m){const S=W(a,n),b=K(a,n);let E=Math.floor(be(a,l,n))||0;A({title:"scrollToStep",data:[{key:"index",value:o},{key:"lifecycle",value:t},{key:"status",value:s}],debug:i});const v=this.store.getPopper("beacon"),I=this.store.getPopper("tooltip");if(t===h.BEACON&&v){const{offsets:P,placement:k}=v;!["bottom"].includes(k)&&!S&&(E=Math.floor(P.popper.top-l))}else if(t===h.TOOLTIP&&I){const{flipped:P,offsets:k,placement:R}=I;["top","right","left"].includes(R)&&!P&&!S?E=Math.floor(k.popper.top-l):E-=u.spotlightPadding}E=E>=0?E:0,s===f.RUNNING&&Se(E,{element:b,duration:r}).then(()=>{setTimeout(()=>{var P;(P=this.store.getPopper("tooltip"))==null||P.instance.update()},10)})}}render(){if(!O())return null;const{index:e,lifecycle:o,status:t}=this.state,{continuous:s=!1,debug:i=!1,nonce:n,scrollToFirstStep:r=!1,steps:l}=this.props,d=t===f.RUNNING,p={};if(d&&l[e]){const u=B(this.props,l[e]);p.step=g.createElement(Ve,{...this.state,callback:this.callback,continuous:s,debug:i,helpers:this.helpers,nonce:n,shouldScroll:!u.disableScrolling&&(e!==0||r),step:u,store:this.store}),p.overlay=g.createElement(De,{id:"react-joyride-portal"},g.createElement(Be,{...u,continuous:s,debug:i,lifecycle:o,onClickOverlay:this.handleClickOverlay}))}return g.createElement("div",{className:"react-joyride"},p.step,p.overlay)}};c(re,"defaultProps",Ne);var ot=re;export{ot as c};
